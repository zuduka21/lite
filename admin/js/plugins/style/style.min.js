ArticleEditor.add("plugin","style",{translations:{en:{style:{style:"Style","remove-style":"Remove Style"}}},defaults:{icon:'<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="m15 1c-3.5955345 2.88454776-5.25146525 9.6241453-7.87485347 9.6241453h-2.6253419l-2.62495116 4.3758547h-.87485347c1.75009768-5.25102559 6.33028189-14 14-14z"/></svg>'},init:function(){},start:function(){if(void 0!==this.opts.styles){var t=Object.keys(this.opts.styles);0!==t.length&&this.app.toolbar.add("style",{title:"## style.style ##",icon:this.opts.style.icon,blocks:{types:t},command:"style.popup"})}},popup:function(t,s){var e=this.app.block.get(),o=e.getType(),l=this._getClasses(o),i=e.hasClass(l),a=this._buildItems(this.opts.styles[o],i);this.app.popup.create("style",{items:a}),this.app.popup.open({button:s})},toggle:function(t){this._toggle(t,!1)},remove:function(){this._toggle()},_toggle:function(t,s){this.app.popup.close();var e=this.app.block.get(),o=e.getType(),l=e.getBlock();this._removeStyles(e,o),!1===s&&l.addClass(t.classname),this.app.control.updatePosition()},_buildItems:function(t,s){var e={};for(var o in t)e[o]={title:t[o].title,command:"style.toggle",params:{classname:t[o].classname},active:t[o].classname===s};return e.remove={title:"## style.remove-style ##",divider:"top",command:"style.remove",hidden:!1===s},e},_getClasses:function(t){var s=this.opts.styles[t],e=[];for(var o in s)e.push(s[o].classname);return e},_removeStyles:function(t,s){var e=this._getClasses(s);t.getBlock().removeClass(e.join(" "))}});